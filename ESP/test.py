from machine import Pin, PWM
from math import ceil
from time import sleep


tones = {
    'C0': 16,
    'C#0': 17,
    'D0': 18,
    'D#0': 19,
    'E0': 21,
    'F0': 22,
    'F#0': 23,
    'G0': 24,
    'G#0': 26,
    'A0': 28,
    'A#0': 29,
    'B0': 31,
    'C1': 33,
    'C#1': 35,
    'D1': 37,
    'D#1': 39,
    'E1': 41,
    'F1': 44,
    'F#1': 46,
    'G1': 49,
    'G#1': 52,
    'A1': 55,
    'A#1': 58,
    'B1': 62,
    'C2': 65,
    'C#2': 69,
    'D2': 73,
    'D#2': 78,
    'E2': 82,
    'F2': 87,
    'F#2': 92,
    'G2': 98,
    'G#2': 104,
    'A2': 110,
    'A#2': 117,
    'B2': 123,
    'C3': 131,
    'C#3': 139,
    'D3': 147,
    'D#3': 156,
    'E3': 165,
    'F3': 175,
    'F#3': 185,
    'G3': 196,
    'G#3': 208,
    'A3': 220,
    'A#3': 233,
    'B3': 247,
    'C4': 262,
    'C#4': 277,
    'D4': 294,
    'D#4': 311,
    'E4': 330,
    'F4': 349,
    'F#4': 370,
    'G4': 392,
    'G#4': 415,
    'A4': 440,
    'A#4': 466,
    'B4': 494,
    'C5': 523,
    'C#5': 554,
    'D5': 587,
    'D#5': 622,
    'E5': 659,
    'F5': 698,
    'F#5': 740,
    'G5': 784,
    'G#5': 831,
    'A5': 880,
    'A#5': 932,
    'B5': 988,
    'C6': 1047,
    'C#6': 1109,
    'D6': 1175,
    'D#6': 1245,
    'E6': 1319,
    'F6': 1397,
    'F#6': 1480,
    'G6': 1568,
    'G#6': 1661,
    'A6': 1760,
    'A#6': 1865,
    'B6': 1976,
    'C7': 2093,
    'C#7': 2217,
    'D7': 2349,
    'D#7': 2489,
    'E7': 2637,
    'F7': 2794,
    'F#7': 2960,
    'G7': 3136,
    'G#7': 3322,
    'A7': 3520,
    'A#7': 3729,
    'B7': 3951,
    'C8': 4186,
    'C#8': 4435,
    'D8': 4699,
    'D#8': 4978,
    'E8': 5274,
    'F8': 5588,
    'F#8': 5920,
    'G8': 6272,
    'G#8': 6645,
    'A8': 7040,
    'A#8': 7459,
    'B8': 7902,
    'C9': 8372,
    'C#9': 8870,
    'D9': 9397,
    'D#9': 9956,
    'E9': 10548,
    'F9': 11175,
    'F#9': 11840,
    'G9': 12544,
    'G#9': 13290,
    'A9': 14080,
    'A#9': 14917,
    'B9': 15804
}


class music:
    def __init__(self, songString='0 D4 8 0', looping=True, tempo=3, duty=2512, pin=None, pins=[Pin(0)]):
        self.tempo = tempo
        self.song = songString
        self.looping = looping
        self.duty = duty

        self.stopped = False

        self.timer = -1
        self.beat = -1
        self.arpnote = 0

        self.pwms = []

        if (not (pin is None)):
            pins = [pin]
        self.pins = pins
        for pin in pins:
            self.pwms.append(PWM(pin, freq=50))

        self.notes = []

        self.playingNotes = []
        self.playingDurations = []

        # Find the end of the song
        self.end = 0
        splitSong = self.song.split(";")
        for note in splitSong:
            snote = note.split(" ")
            testEnd = round(float(snote[0])) + ceil(float(snote[2]))
            if (testEnd > self.end):
                self.end = testEnd

        # Create empty song structure
        while (self.end > len(self.notes)):
            self.notes.append(None)

        # Populate song structure with the notes
        for note in splitSong:
            snote = note.split(" ")
            beat = round(float(snote[0]))

            if (self.notes[beat] == None):
                self.notes[beat] = []
            self.notes[beat].append([snote[1], ceil(float(snote[2]))])  # Note, Duration

        # Round up end of song to nearest bar
        self.end = ceil(self.end / 8) * 8

    def stop(self):
        for pwm in self.pwms:
            pwm.deinit()
        self.stopped = True

    def restart(self):
        self.beat = -1
        self.timer = 0
        self.stop()
        self.pwms = []
        for pin in self.pins:
            self.pwms.append(PWM(pin))
        self.stopped = False

    def resume(self):
        self.stop()
        self.pwms = []
        for pin in self.pins:
            self.pwms.append(PWM(pin))
        self.stopped = False

    def tick(self):
        if (not self.stopped):
            self.timer = self.timer + 1

            # Loop
            if (self.timer % (self.tempo * self.end) == 0 and (not (self.timer == 0))):
                if (not self.looping):
                    self.stop()
                    return False
                self.beat = -1
                self.timer = 0

            # On Beat
            if (self.timer % self.tempo == 0):
                self.beat = self.beat + 1

                # Remove expired notes from playing list
                i = 0
                while (i < len(self.playingDurations)):
                    self.playingDurations[i] = self.playingDurations[i] - 1
                    if (self.playingDurations[i] <= 0):
                        self.playingNotes.pop(i)
                        self.playingDurations.pop(i)
                    else:
                        i = i + 1

                # Add new notes and their durations to the playing list

                """
                #Old method runs for every note, slow to process on every beat and causes noticeable delay
                ssong = song.split(";")
                for note in ssong:
                    snote = note.split(" ")
                    if int(snote[0]) == beat:
                        playingNotes.append(snote[1])
                        playingDurations.append(int(snote[2]))
                """

                if (self.beat < len(self.notes)):
                    if (self.notes[self.beat] != None):
                        for note in self.notes[self.beat]:
                            self.playingNotes.append(note[0])
                            self.playingDurations.append(note[1])

                # Only need to run these checks on beats
                i = 0
                for pwm in self.pwms:
                    if (i >= len(self.playingNotes)):
                        if hasattr(pwm, 'duty_u16'):
                            pwm.duty_u16(0)
                        else:
                            pwm.duty(0)
                    else:
                        # Play note
                        if hasattr(pwm, 'duty_u16'):
                            pwm.duty_u16(self.duty)
                        else:
                            pwm.duty(self.duty)
                        pwm.freq(tones[self.playingNotes[i]])
                    i = i + 1

            # Play arp of all playing notes
            if (len(self.playingNotes) > len(self.pwms)):
                p = self.pwms[len(self.pwms)-1]
                if hasattr(p, 'duty_u16'):
                    p.duty_u16(self.duty)
                else:
                    p.duty(self.duty)

                if (self.arpnote > len(self.playingNotes)-len(self.pwms)):
                    self.arpnote = 0
                self.pwms[len(self.pwms)-1].freq(tones[self.playingNotes[self.arpnote+(len(self.pwms)-1)]])
                self.arpnote = self.arpnote + 1

            return True
        else:
            return False


chrismas = "0 E6 2 43;2 E6 2 43;4 E6 4 43;8 E6 2 43;10 E6 2 43;12 E6 4 43;16 E6 2 43;18 G6 2 43;20 C6 3 43;23 D6 1 43;24 E6 8 43;32 F6 2 43;34 F6 2 43;36 F6 2 43;38 F6 2 43;40 F6 2 43;46 E6 1 43;47 E6 1 43;42 E6 2 43;44 E6 2 43;48 E6 2 43;50 D6 2 43;52 D6 2 43;54 E6 2 43;56 D6 4 43;60 G6 2 43;64 E6 2 43;66 E6 2 43;68 E6 4 43;72 E6 2 43;74 E6 2 43;76 E6 4 43;80 E6 2 43;82 G6 2 43;84 C6 3 43;87 D6 1 43;88 E6 8 43;96 F6 2 43;98 F6 2 43;100 F6 2 43;102 F6 2 43;104 F6 2 43;106 E6 2 43;108 E6 2 43;110 E6 1 43;111 E6 1 43;112 G6 2 43;114 G6 2 43;116 F6 2 43;118 D6 2 43;120 C6 4 43"
whatthis = "0 C#6 1 0;1 F#5 3 0;1 A5 3 0;1 D6 3 0;4 F#5 1 0;4 D5 1 0;5 F#5 3 0;5 A5 3 0;9 F#5 1 0;8 D5 1 0;8 F#5 1 0;9 A5 1 0;10 B5 1 0;11 F#5 1 0;11 C#6 1 0;12 D6 1 0;13 C#6 1 0;13 F5 1 0;15 C#5 1 0;15 F5 1 0;16 F5 3 0;16 G#5 3 0;19 C#5 1 0;19 F5 1 0;20 F5 1 0;20 G#5 1 0;21 F#5 1 0;21 A5 1 0;22 G#5 1 0;22 B5 1 0;23 C#6 1 0;24 F#5 1 0;24 A5 2 0;26 D5 1 0;26 F#5 1 0;27 F#5 1 0;27 A5 1 0;29 D5 1 0;29 F#5 1 0;30 F#5 1 0;30 A5 1 0;31 B5 1 0;32 F#5 1 0;32 C#6 1 0;33 D6 1 0;34 C#6 1 0;34 F#5 8 0;35 A5 1 0;36 C#6 1 0;37 A5 1 0;38 C#6 1 0;39 A5 1 0;40 C#6 1 0;41 A5 1 0;42 C#6 1 0;42 F#5 4 0;43 A5 1 0;45 A5 1 0;44 C#6 1 0;46 C#6 1 0;46 G#5 4 0;47 A5 1 0;49 A5 1 0;48 C#6 1 0;50 F#5 4 0;51 A5 1 0;53 A5 1 0;50 C#6 1 0;52 C#6 1 0;54 C#6 1 0;56 C#6 1 0;55 A5 1 0;57 A5 1 0;54 G5 4 0;58 F5 1 0;58 G#5 1 0;58 D6 1 0;59 C#6 1 0;60 B5 1 0;61 C#6 1 0;62 D6 1 0;64 D6 1 0;63 C#6 1 0;65 E6 1 0;66 A5 1 0;66 D6 1 0;66 F#6 1 0;67 E6 1 0;68 A5 1 0;68 D6 1 0;69 E6 1 0;70 A#5 1 0;70 C#6 1 0;70 F#6 1 0;71 E6 1 0;72 A#5 1 0;72 D6 1 0;73 E6 1 0;74 B5 1 0;74 D6 1 0;74 F#6 1 0;75 E6 1 0;76 B5 1 0;76 D6 1 0;77 E6 1 0;78 A#5 2 0;78 D6 2 0;78 F#6 2 0;82 D5 1 0;82 F5 1 0;82 A5 1 0;82 D6 1 0;83 D6 1 0;83 F6 1 0;83 A6 1 0;84 D6 2 0;84 F6 2 0;84 A6 2 0;88 D7 1 0;88 F7 1 0;86 D6 1 0;86 F#6 1 0;86 A#6 1 0;86 E7 3 0;87 D7 1 0;87 F7 1 0;87 A#7 1 0;88 A#7 1 0;89 D6 1 0;89 F6 1 0;89 G#6 1 0;89 B6 1 0;89 G#7 1 0;90 D6 1 0;90 F6 1 0;90 B6 1 0;90 G#6 1 0;91 B6 5 0;91 G#6 5 0;91 F6 5 0;91 D6 5 0;96 E6 1 0;96 C#6 1 0;96 A6 1 0;96 C#7 1 0;97 A5 1 0;97 C#6 1 0;97 E6 1 0;97 A6 1 0;17 B4 1 43"
we = "4 G5 1 0;8 G5 1 0;10 A5 1 0;14 F#5 1 0;16 E5 1 0;20 E5 1 0;24 E5 1 0;28 A5 1 0;32 A5 1 0;34 B5 1 0;36 A5 1 0;38 G5 1 0;40 F#5 1 0;44 D5 1 0;48 D5 1 0;52 B5 1 0;56 B5 1 0;58 C6 1 0;60 B5 1 0;62 A5 1 0;64 G5 1 0;68 E5 1 0;72 E5 1 0;74 E5 1 0;76 D5 1 0;80 A5 1 0;84 F#5 1 0;0 D5 2 0;96 D5 2 0;100 G5 1 0;104 G5 1 0;108 G5 1 0;112 F#5 2 0;119 F#5 1 0;123 A5 1 0;127 G5 1 0;131 E5 1 0;142 A5 1 0;146 B5 1 0;150 A5 1 0;154 G5 1 0;158 D6 1 0;162 D5 1 0;166 D5 1 0;168 D5 1 0;170 E5 1 0;174 A5 1 0;178 F#5 1 0;182 G5 3 0;0 D5 2 0;4 G5 1 0;8 G5 1 0;10 A5 1 0;14 F#5 1 0;16 E5 1 0;20 E5 1 0;24 E5 1 0;28 A5 1 0;32 A5 1 0;34 B5 1 0;36 A5 1 0;38 G5 1 0;40 F#5 1 0;44 D5 1 0;48 D5 1 0;52 B5 1 0;56 B5 1 0;58 C6 1 0;60 B5 1 0;62 A5 1 0;64 G5 1 0;68 E5 1 0;72 E5 1 0;74 E5 1 0;76 D5 1 0;80 A5 1 0;84 F#5 1 0;88 G5 3 0;88 G5 3 0;96 D5 2 0;100 G5 1 0;104 G5 1 0;108 G5 1 0;112 F#5 2 0;119 F#5 1 0;123 A5 1 0;127 G5 1 0;131 E5 1 0;135 D5 1 0;135 D5 1 0;142 A5 1 0;146 B5 1 0;150 A5 1 0;154 G5 1 0;158 D6 1 0;162 D5 1 0;166 D5 1 0;168 D5 1 0;170 E5 1 0;174 A5 1 0;178 F#5 1 0;182 G5 3 0;194 G5 1 0;198 G5 1 0;200 A5 1 0;204 F#5 1 0;206 E5 1 0;210 E5 1 0;214 E5 1 0;218 A5 1 0;222 A5 1 0;224 B5 1 0;226 A5 1 0;228 G5 1 0;230 F#5 1 0;234 D5 1 0;238 D5 1 0;242 B5 1 0;246 B5 1 0;248 C6 1 0;250 B5 1 0;252 A5 1 0;254 G5 1 0;258 E5 1 0;262 E5 1 0;264 E5 1 0;266 D5 1 0;270 A5 1 0;274 F#5 1 0;190 D5 2 0;202 G5 1 0;190 D5 2 0;194 G5 1 0;198 G5 1 0;200 A5 1 0;202 G5 1 0;204 F#5 1 0;206 E5 1 0;210 E5 1 0;214 E5 1 0;218 A5 1 0;222 A5 1 0;224 B5 1 0;226 A5 1 0;228 G5 1 0;230 F#5 1 0;234 D5 1 0;238 D5 1 0;242 B5 1 0;246 B5 1 0;248 C6 1 0;250 B5 1 0;252 A5 1 0;254 G5 1 0;258 E5 1 0;262 E5 1 0;264 E5 1 0;266 D5 1 0;270 A5 1 0;274 F#5 1 0;278 G5 3 0;278 G5 3 0;190 D5 2 0;194 G5 1 0;198 G5 1 0;200 A5 1 0;12 G5 1 0;12 G5 1 0;194 G5 1 26;198 G5 1 26;200 A5 1 26;204 F#5 1 26;206 E5 1 26;210 E5 1 26;214 E5 1 26;218 A5 1 26;222 A5 1 26;224 B5 1 26;226 A5 1 26;228 G5 1 26;230 F#5 1 26;234 D5 1 26;238 D5 1 26;242 B5 1 26;246 B5 1 26;248 C6 1 26;250 B5 1 26;252 A5 1 26;254 G5 1 26;258 E5 1 26;262 E5 1 26;264 E5 1 26;266 D5 1 26;270 A5 1 26;274 F#5 1 26;190 D5 2 26;202 G5 1 26;190 D5 2 26;194 G5 1 26;198 G5 1 26;200 A5 1 26;202 G5 1 26;204 F#5 1 26;206 E5 1 26;210 E5 1 26;214 E5 1 26;218 A5 1 26;222 A5 1 26;224 B5 1 26;226 A5 1 26;228 G5 1 26;230 F#5 1 26;234 D5 1 26;238 D5 1 26;242 B5 1 26;246 B5 1 26;248 C6 1 26;250 B5 1 26;252 A5 1 26;254 G5 1 26;258 E5 1 26;262 E5 1 26;264 E5 1 26;266 D5 1 26;270 A5 1 26;274 F#5 1 26;278 G5 3 26;278 G5 3 26;190 D5 2 26;194 G5 1 26;198 G5 1 26;200 A5 1 26;0 D5 2 26;4 G5 1 26;8 G5 1 26;10 A5 1 26;14 F#5 1 26;16 E5 1 26;20 E5 1 26;24 E5 1 26;28 A5 1 26;32 A5 1 26;34 B5 1 26;36 A5 1 26;38 G5 1 26;40 F#5 1 26;44 D5 1 26;48 D5 1 26;52 B5 1 26;56 B5 1 26;58 C6 1 26;60 B5 1 26;62 A5 1 26;64 G5 1 26;68 E5 1 26;72 E5 1 26;74 E5 1 26;76 D5 1 26;80 A5 1 26;84 F#5 1 26;88 G5 3 26;96 D5 2 26;100 G5 1 26;104 G5 1 26;108 G5 1 26;112 F#5 2 26;119 F#5 1 26;123 A5 1 26;127 G5 1 26;131 E5 1 26;135 D5 1 26;142 A5 1 26;146 B5 1 26;150 A5 1 26;154 G5 1 26;158 D6 1 26;162 D5 1 26;166 D5 1 26;168 D5 1 26;170 E5 1 26;174 A5 1 26;178 F#5 1 26;182 G5 3 26;12 G5 1 26;194 G5 1 8;198 G5 1 8;200 A5 1 8;204 F#5 1 8;206 E5 1 8;210 E5 1 8;214 E5 1 8;218 A5 1 8;222 A5 1 8;224 B5 1 8;226 A5 1 8;228 G5 1 8;230 F#5 1 8;234 D5 1 8;238 D5 1 8;242 B5 1 8;246 B5 1 8;248 C6 1 8;250 B5 1 8;252 A5 1 8;254 G5 1 8;258 E5 1 8;262 E5 1 8;264 E5 1 8;266 D5 1 8;270 A5 1 8;274 F#5 1 8;190 D5 2 8;202 G5 1 8;190 D5 2 8;194 G5 1 8;198 G5 1 8;200 A5 1 8;202 G5 1 8;204 F#5 1 8;206 E5 1 8;210 E5 1 8;214 E5 1 8;218 A5 1 8;222 A5 1 8;224 B5 1 8;226 A5 1 8;228 G5 1 8;230 F#5 1 8;234 D5 1 8;238 D5 1 8;242 B5 1 8;246 B5 1 8;248 C6 1 8;250 B5 1 8;252 A5 1 8;254 G5 1 8;258 E5 1 8;262 E5 1 8;264 E5 1 8;266 D5 1 8;270 A5 1 8;274 F#5 1 8;278 G5 3 8;278 G5 3 8;190 D5 2 8;194 G5 1 8;198 G5 1 8;200 A5 1 8;0 D5 2 8;4 G5 1 8;8 G5 1 8;10 A5 1 8;14 F#5 1 8;16 E5 1 8;20 E5 1 8;24 E5 1 8;28 A5 1 8;32 A5 1 8;34 B5 1 8;36 A5 1 8;38 G5 1 8;40 F#5 1 8;44 D5 1 8;48 D5 1 8;52 B5 1 8;56 B5 1 8;58 C6 1 8;60 B5 1 8;62 A5 1 8;64 G5 1 8;68 E5 1 8;72 E5 1 8;74 E5 1 8;76 D5 1 8;80 A5 1 8;84 F#5 1 8;88 G5 3 8;96 D5 2 8;100 G5 1 8;104 G5 1 8;108 G5 1 8;112 F#5 2 8;119 F#5 1 8;123 A5 1 8;127 G5 1 8;131 E5 1 8;135 D5 1 8;142 A5 1 8;146 B5 1 8;150 A5 1 8;154 G5 1 8;158 D6 1 8;162 D5 1 8;166 D5 1 8;168 D5 1 8;170 E5 1 8;174 A5 1 8;178 F#5 1 8;182 G5 3 8;12 G5 1 8"
jack = "0 G4 8 10008;8 G4 8 10008;16 G4 8 10008;24 G3 8 8;32 G5 8 10008;40 G5 8 10008;48 G5 8 10008;56 G5 4 10008;32 G4 2 8;32 D#4 2 8;32 C4 2 8;36 G4 2 8;36 D#4 2 8;36 C4 2 8;40 G4 2 8;40 D#4 2 8;40 C4 2 8;44 G4 2 8;44 D#4 2 8;44 C4 2 8;48 G4 2 8;48 D#4 2 8;48 C4 2 8;52 G4 2 8;52 D#4 2 8;52 C4 2 8;56 G4 2 8;56 D#4 2 8;56 C4 2 8;60 F4 2 8;60 D4 2 8;60 G#3 2 8;60 G#5 4 10008;64 F5 8 10008;72 F5 8 10008;80 F5 8 10008;88 F5 4 10008;92 G#5 4 10008;64 G#4 2 8;64 D4 2 8;64 C4 2 8;68 G#4 2 8;68 D4 2 8;68 C4 2 8;72 G#4 2 8;72 D4 2 8;72 C4 2 8;76 G#4 2 8;76 D4 2 8;76 C4 2 8;80 G#4 2 8;80 D4 2 8;80 C4 2 8;84 G#4 2 8;84 D4 2 8;84 C4 2 8;88 G#4 2 8;88 D4 2 8;88 C4 2 8;92 G#4 2 8;92 D4 2 8;92 C5 2 10008;96 G5 8 10008;104 G5 8 10008;112 G5 4 10008;96 B4 2 8;96 G4 2 8;96 E4 2 8;100 G4 2 8;100 E4 2 8;100 B3 2 8;104 G3 2 8;104 B3 2 8;104 E4 2 8;108 E4 2 8;108 G4 2 8;108 B3 2 8;112 E4 2 8;112 G4 2 8;116 B5 2 10008;118 G5 2 10008;120 E5 2 10008;122 B4 2 10008;116 G5 2 10008;120 B4 2 8;126 E4 2 8;128 C4 2 8;124 G#4 2 8;128 F5 4 10008;128 D4 2 8;128 F4 2 8;128 G#4 2 8;124 E4 2 8;120 G4 2 8;120 E4 2 8;132 D4 2 8;132 F4 2 8;132 G#4 2 8;132 C6 2 10008;134 G#5 2 10008;136 F5 4 10008;138 C5 2 10008;136 G#4 2 8;136 F4 2 8;136 D4 2 8;140 D4 2 8;140 F4 2 8;140 G#4 2 8;142 F4 2 8;144 G4 2 8;144 D4 2 8;144 G5 8 10008;144 D5 8 10008;144 B5 8 10008;152 G3 2 8;120 G5 4 10008;116 E4 2 8;116 G4 2 8;116 B3 2 8;120 B3 2 8;124 B3 2 8;112 B4 2 8;148 G4 2 8;148 D4 2 8;148 B4 2 8;152 G4 2 8;152 D4 2 8;156 G4 2 8;156 D4 2 8;152 B4 2 10008;156 B4 2 10008;152 D5 2 10008;156 D5 2 10008;156 G5 2 10008;156 G3 2 8;32 D#5 2 10008;40 D#5 2 10008;48 D#5 2 10008;56 D#5 2 10008;64 D5 2 10008;72 D5 2 10008;80 D5 2 10008;88 D5 2 10008;96 E5 2 10008;104 E5 2 10008;112 E5 2 10008;160 D#5 2 10008;160 G5 2 10008;164 D#5 2 10008;164 G5 2 10008;168 D#5 2 10008;168 G5 2 10008;172 D#5 2 10008;172 G5 2 10008;176 D#5 2 10008;176 G5 2 10008;178 F5 2 10008;178 G#5 2 10008;180 F5 2 10008;180 D5 2 10008;185 D5 2 10008;184 F5 2 10008;186 F5 2 10008;188 F5 2 10008;190 F5 2 10008;160 C3 2 8;164 D#4 2 8;164 G4 2 8;168 G3 2 8;172 G4 2 8;172 D#4 2 8;176 D3 2 8;180 G#4 2 8;180 F4 2 8;184 F#3 2 8;188 F4 2 8;188 G#4 2 8;187 D5 2 10008;189 D5 2 10008;184 D5 1 10008;192 F5 2 10008;191 D5 1 10008;192 D5 2 10008;196 D5 2 10008;196 F5 2 10008;200 D5 2 10008;200 F5 2 10008;202 F5 2 10008;202 D5 2 10008;204 D5 2 10008;204 F5 2 10008;208 D5 2 10008;208 F5 2 10008;210 D#5 2 10008;210 G5 2 10008;212 F5 2 10008;212 G#5 2 10008;217 D#5 2 10008;216 G5 2 10008;218 G5 2 10008;220 G5 2 10008;219 D#5 2 10008;216 D#5 1 10008;192 D3 2 8;196 F4 2 8;196 D4 2 8;204 F4 2 8;204 D4 2 8;200 F3 2 8;220 G4 2 8;220 D#4 2 8;216 G3 2 8;208 G#3 2 8;212 G#4 2 8;212 F4 2 8;160 C5 2 10008;224 C5 2 10008;224 D#6 2 8;224 G6 2 8;221 D#5 2 10008;228 D#6 2 8;228 G6 2 8;232 D#6 2 10008;232 G6 2 10008;222 G5 2 10008;223 D#5 1 10008;236 F6 2 10008;236 G#6 2 10008;240 G6 2 10008;240 A#6 2 10008;244 G#6 2 10008;246 G6 2 10008;248 F6 4 10008;244 F6 2 10008;248 D6 4 10008;228 D#5 2 10008;228 G5 2 8;232 G4 2 8;236 D#5 2 8;236 G5 2 8;240 A#4 2 8;244 D5 2 8;244 F5 2 8;252 D5 2 8;252 F5 2 8;248 F4 2 8;256 F6 4 10008;260 F6 4 10008;264 F6 2 10008;266 G6 2 10008;268 G#6 4 10008;272 G6 2 10008;256 D5 2 8;256 F5 2 8;260 D5 2 8;260 A#4 2 8;264 A#4 2 8;264 F4 2 8;268 F4 2 8;268 D4 2 8;276 D#6 4 10008;276 C6 4 10008;276 G5 4 10008;276 D#5 4 10008;276 C5 4 8;276 C4 4 8;280 B3 4 8;280 B4 4 8;284 G3 4 8;284 G4 4 8;280 D5 4 10008;280 F5 4 10008;280 D6 4 10008;280 B5 4 10008;284 D6 4 10008;284 B5 4 10008;284 G5 4 10008;284 G6 4 10008;276 G4 4 8;280 F4 4 8;284 B3 4 8;132 C5 2 10008;134 G#4 2 8;138 C4 2 8;140 G#3 2 8;142 F3 2 8;144 B3 2 8;288 D6 4 10008;288 A#6 4 10008;292 D6 4 10008;292 A#6 4 10008;296 D6 2 10008;296 A#6 2 10008;298 C6 2 10008;298 A6 2 10008;300 A#5 2 10008;300 G6 2 10008;288 G3 4 8;288 G4 4 8;292 G4 4 8;292 A#4 4 8;292 D5 4 8;296 D3 4 8;296 D4 4 8;300 G4 4 8;300 A#4 4 8;300 D5 4 8;304 D6 4 10008;304 A#6 4 10008;308 D6 4 10008;308 A#6 4 10008;312 D6 2 10008;312 A#6 2 10008;314 C6 2 10008;314 A6 2 10008;316 A#5 2 10008;316 G6 2 10008;304 G3 4 8;304 G4 4 8;308 G4 4 8;308 A#4 4 8;308 D5 4 8;312 D3 4 8;312 D4 4 8;316 G4 4 8;316 A#4 4 8;316 D5 4 8;320 F5 2 10008;324 A#5 2 10008;324 C#6 2 10008;324 F6 2 10008;328 F5 2 10008;332 A#5 2 10008;332 C#6 2 10008;332 F6 2 10008;320 A#4 4 8;320 A#3 4 8;324 F3 4 8;324 F4 4 8;328 F3 4 8;328 F4 4 8;332 D#4 2 8;332 D#3 2 8;334 C#3 2 8;336 C3 2 8;334 C#4 2 8;336 C4 2 8;340 G3 4 8;340 G4 4 8;344 G#3 4 8;344 G#4 4 8;348 A#3 4 8;348 A#4 4 8;336 G5 2 10008;340 A#5 2 10008;340 C6 2 10008;340 E6 2 10008;344 F5 2 10008;344 C#5 2 10008;345.3333435058594 F#5 2 10008;346.6666564941406 G5 2 10008;348 G#5 2 10008;349.3333435058594 A5 2 10008;350.6666564941406 A#5 2 10008;352 B5 4 10008;352 G#5 4 10008;352 D#5 4 10008;352 G#4 4 8;352 G#3 4 8;288 A#5 4 10008;304 A#5 4 10008;288 G5 4 10008;224 G5 2 10008;356 D#5 4 10008;356 G#5 4 10008;356 B5 4 10008;356 D#4 4 8;356 B4 4 8;360 D#3 2 8;360 D#4 4 8;360 D#5 2 10008;360 G#5 2 10008;360 B5 2 10008;362 C#5 2 10008;362 A#5 2 10008;364 G#5 4 10008;364 B4 4 10008;364 B3 4 8;364 G#4 4 8;368 B5 2 10008;370 B5 2 10008;372 B5 2 10008;374 B5 2 10008;376 B5 2 10008;368 G#5 4 10008;368 D#5 4 10008;372 D#5 4 10008;372 G#5 4 10008;376 G#5 2 10008;376 D#5 2 10008;378 C#5 2 10008;378 A#5 2 10008;380 G#5 4 10008;380 B4 4 10008;368 G#4 4 8;368 G#3 4 8;372 D#4 4 8;376 D#3 2 8;376 D#4 4 8;380 B3 4 8;380 G#4 4 8;372 B4 4 8;362 C#3 2 8;378 C#3 2 8;384 B5 4 10008;384 G5 4 10008;388 G5 4 10008;388 E5 4 10008;392 G5 4 10008;392 E5 4 10008;384 E3 4 8;388 E4 4 8;388 G4 4 8;392 B2 4 8;396 E4 4 8;396 G4 4 8;396 F#5 2 10008;398 E5 2 10008;400 C#5 2 10008;402 C#5 2 10008;404 B4 2 10008;406 B4 2 10008;408 A#4 2 10008;410 A#4 2 10008;412 G#4 2 10008;400 C#4 4 8;400 C#3 4 8;404 B3 4 8;404 B2 4 8;408 A#2 4 8;408 A#3 4 8;412 G#2 4 8;412 G#3 4 8;416 G#2 1 8;417 D#3 1 8;418 G#3 1 8;419 B3 1 8;420 D#4 1 10008;421 G#4 1 10008;422 B4 1 10008;423 D#5 1 10008;424 E5 4 10008;424 B4 4 10008;424 G#4 4 10008;424 E4 4 10008;424 E3 4 8;428 E2 4 8;428 E3 4 8;432 G#2 1 8;433 D#3 1 8;434 G#3 1 8;435 B3 1 8;436 D#4 1 10008;437 G#4 1 10008;438 B4 1 10008;439 D#5 1 10008;440 E5 4 10008;440 B4 4 10008;440 G#4 4 10008;440 E4 4 10008;440 E3 4 8;444 E2 4 8;444 E3 4 8;448 A4 4 10008;452 F5 4 10008;456 F5 4 10008;460 A4 4 10008;464 G#4 4 10008;468 A4 2 10008;470 B4 2 10008;472 C#5 8 10008;448 D3 4 8;452 D4 4 8;452 F4 4 8;456 A2 4 8;460 D4 4 8;460 F4 4 8;464 E4 4 8;464 E3 4 8;468 E4 4 8;472 F#2 4 8;472 A4 8 10008;468 E3 4 8;476 C#3 4 8;472 C#4 4 10008;476 A3 4 8;480 C#3 4 8;484 C#4 4 8;484 A4 4 8;484 F#6 4 10008;484 A6 4 10008;488 F6 4 10008;488 G#6 4 10008;488 F#3 4 8;492 C#4 4 8;492 A4 4 8;496 C#3 4 8;500 C#4 4 8;500 A4 4 8;500 D#6 4 10008;500 F#6 4 10008;504 D#6 4 10008;504 A5 4 10008;508 C#6 4 10008;508 A5 4 10008;512 D#6 4 10008;512 A5 4 10008;516 F#6 4 10008;516 A5 4 10008;520 G#6 4 10008;520 G#5 4 10008;504 F#3 4 8;508 C#4 4 8;508 A4 4 8;512 C#3 4 8;516 C#4 4 8;516 A4 4 8;520 G#3 4 8"
main = "0 G4 8 10008;8 G4 8 10008;16 G4 8 10008;24 G3 8 8;32 G5 8 10008;40 G5 8 10008;48 G5 8 10008;56 G5 4 10008;32 G4 2 8;32 D#4 2 8;32 C4 2 8;36 G4 2 8;36 D#4 2 8;36 C4 2 8;40 G4 2 8;40 D#4 2 8;40 C4 2 8;44 G4 2 8;44 D#4 2 8;44 C4 2 8;48 G4 2 8;48 D#4 2 8;48 C4 2 8;52 G4 2 8;52 D#4 2 8;52 C4 2 8;56 G4 2 8;56 D#4 2 8;56 C4 2 8;60 F4 2 8;60 D4 2 8;60 G#3 2 8;60 G#5 4 10008;64 F5 8 10008;72 F5 8 10008;80 F5 8 10008;88 F5 4 10008;92 G#5 4 10008;64 G#4 2 8;64 D4 2 8;64 C4 2 8;68 G#4 2 8;68 D4 2 8;68 C4 2 8;72 G#4 2 8;72 D4 2 8;72 C4 2 8;76 G#4 2 8;76 D4 2 8;76 C4 2 8;80 G#4 2 8;80 D4 2 8;80 C4 2 8;84 G#4 2 8;84 D4 2 8;84 C4 2 8;88 G#4 2 8;88 D4 2 8;88 C4 2 8;92 G#4 2 8;92 D4 2 8;92 C5 2 10008;96 G5 8 10008;104 G5 8 10008;112 G5 4 10008;96 B4 2 8;96 G4 2 8;96 E4 2 8;100 G4 2 8;100 E4 2 8;100 B3 2 8;104 G3 2 8;104 B3 2 8;104 E4 2 8;108 E4 2 8;108 G4 2 8;108 B3 2 8;112 E4 2 8;112 G4 2 8;116 B5 2 10008;118 G5 2 10008;120 E5 2 10008;122 B4 2 10008;116 G5 2 10008;120 B4 2 8;126 E4 2 8;128 C4 2 8;124 G#4 2 8;128 F5 4 10008;128 D4 2 8;128 F4 2 8;128 G#4 2 8;124 E4 2 8;120 G4 2 8;120 E4 2 8;132 D4 2 8;132 F4 2 8;132 G#4 2 8;132 C6 2 10008;134 G#5 2 10008;136 F5 4 10008;138 C5 2 10008;136 G#4 2 8;136 F4 2 8;136 D4 2 8;140 D4 2 8;140 F4 2 8;140 G#4 2 8;142 F4 2 8;144 G4 2 8;144 D4 2 8;144 G5 8 10008;144 D5 8 10008;144 B5 8 10008;152 G3 2 8;120 G5 4 10008;116 E4 2 8;116 G4 2 8;116 B3 2 8;120 B3 2 8;124 B3 2 8;112 B4 2 8;148 G4 2 8;148 D4 2 8;148 B4 2 8;152 G4 2 8;152 D4 2 8;156 G4 2 8;156 D4 2 8;152 B4 2 10008;156 B4 2 10008;152 D5 2 10008;156 D5 2 10008;156 G5 2 10008;156 G3 2 8;32 D#5 2 10008;40 D#5 2 10008;48 D#5 2 10008;56 D#5 2 10008;64 D5 2 10008;72 D5 2 10008;80 D5 2 10008;88 D5 2 10008;96 E5 2 10008;104 E5 2 10008;112 E5 2 10008;160 D#5 2 10008;160 G5 2 10008;164 D#5 2 10008;164 G5 2 10008;168 D#5 2 10008;168 G5 2 10008;172 D#5 2 10008;172 G5 2 10008;176 D#5 2 10008;176 G5 2 10008;178 F5 2 10008;178 G#5 2 10008;180 F5 2 10008;180 D5 2 10008;185 D5 2 10008;184 F5 2 10008;186 F5 2 10008;188 F5 2 10008;190 F5 2 10008;160 C3 2 8;164 D#4 2 8;164 G4 2 8;168 G3 2 8;172 G4 2 8;172 D#4 2 8;176 D3 2 8;180 G#4 2 8;180 F4 2 8;184 F#3 2 8;188 F4 2 8;188 G#4 2 8;187 D5 2 10008;189 D5 2 10008;184 D5 1 10008;192 F5 2 10008;191 D5 1 10008;192 D5 2 10008;196 D5 2 10008;196 F5 2 10008;200 D5 2 10008;200 F5 2 10008;202 F5 2 10008;202 D5 2 10008;204 D5 2 10008;204 F5 2 10008;208 D5 2 10008;208 F5 2 10008;210 D#5 2 10008;210 G5 2 10008;212 F5 2 10008;212 G#5 2 10008;217 D#5 2 10008;216 G5 2 10008;218 G5 2 10008;220 G5 2 10008;219 D#5 2 10008;216 D#5 1 10008;192 D3 2 8;196 F4 2 8;196 D4 2 8;204 F4 2 8;204 D4 2 8;200 F3 2 8;220 G4 2 8;220 D#4 2 8;216 G3 2 8;208 G#3 2 8;212 G#4 2 8;212 F4 2 8;160 C5 2 10008;224 C5 2 10008;224 D#6 2 8;224 G6 2 8;221 D#5 2 10008;228 D#6 2 8;228 G6 2 8;232 D#6 2 10008;232 G6 2 10008;222 G5 2 10008;223 D#5 1 10008;236 F6 2 10008;236 G#6 2 10008;240 G6 2 10008;240 A#6 2 10008;244 G#6 2 10008;246 G6 2 10008;248 F6 4 10008;244 F6 2 10008;248 D6 4 10008;228 D#5 2 10008;228 G5 2 8;232 G4 2 8;236 D#5 2 8;236 G5 2 8;240 A#4 2 8;244 D5 2 8;244 F5 2 8;252 D5 2 8;252 F5 2 8;248 F4 2 8;256 F6 4 10008;260 F6 4 10008;264 F6 2 10008;266 G6 2 10008;268 G#6 4 10008;272 G6 2 10008;256 D5 2 8;256 F5 2 8;260 D5 2 8;260 A#4 2 8;264 A#4 2 8;264 F4 2 8;268 F4 2 8;268 D4 2 8;276 D#6 4 10008;276 C6 4 10008;276 G5 4 10008;276 D#5 4 10008;276 C5 4 8;276 C4 4 8;280 B3 4 8;280 B4 4 8;284 G3 4 8;284 G4 4 8;280 D5 4 10008;280 F5 4 10008;280 D6 4 10008;280 B5 4 10008;284 D6 4 10008;284 B5 4 10008;284 G5 4 10008;284 G6 4 10008;276 G4 4 8;280 F4 4 8;284 B3 4 8;132 C5 2 10008;134 G#4 2 8;138 C4 2 8;140 G#3 2 8;142 F3 2 8;144 B3 2 8;288 D6 4 10008;288 A#6 4 10008;292 D6 4 10008;292 A#6 4 10008;296 D6 2 10008;296 A#6 2 10008;298 C6 2 10008;298 A6 2 10008;300 A#5 2 10008;300 G6 2 10008;288 G3 4 8;288 G4 4 8;292 G4 4 8;292 A#4 4 8;292 D5 4 8;296 D3 4 8;296 D4 4 8;300 G4 4 8;300 A#4 4 8;300 D5 4 8;304 D6 4 10008;304 A#6 4 10008;308 D6 4 10008;308 A#6 4 10008;312 D6 2 10008;312 A#6 2 10008;314 C6 2 10008;314 A6 2 10008;316 A#5 2 10008;316 G6 2 10008;304 G3 4 8;304 G4 4 8;308 G4 4 8;308 A#4 4 8;308 D5 4 8;312 D3 4 8;312 D4 4 8;316 G4 4 8;316 A#4 4 8;316 D5 4 8;320 F5 2 10008;324 A#5 2 10008;324 C#6 2 10008;324 F6 2 10008;328 F5 2 10008;332 A#5 2 10008;332 C#6 2 10008;332 F6 2 10008;320 A#4 4 8;320 A#3 4 8;324 F3 4 8;324 F4 4 8;328 F3 4 8;328 F4 4 8;332 D#4 2 8;332 D#3 2 8;334 C#3 2 8;336 C3 2 8;334 C#4 2 8;336 C4 2 8;340 G3 4 8;340 G4 4 8;344 G#3 4 8;344 G#4 4 8;348 A#3 4 8;348 A#4 4 8;336 G5 2 10008;340 A#5 2 10008;340 C6 2 10008;340 E6 2 10008;344 F5 2 10008;344 C#5 2 10008;345.3333435058594 F#5 2 10008;346.6666564941406 G5 2 10008;348 G#5 2 10008;349.3333435058594 A5 2 10008;350.6666564941406 A#5 2 10008;352 B5 4 10008;352 G#5 4 10008;352 D#5 4 10008;352 G#4 4 8;352 G#3 4 8;288 A#5 4 10008;304 A#5 4 10008;288 G5 4 10008;224 G5 2 10008;356 D#5 4 10008;356 G#5 4 10008;356 B5 4 10008;356 D#4 4 8;356 B4 4 8;360 D#3 2 8;360 D#4 4 8;360 D#5 2 10008;360 G#5 2 10008;360 B5 2 10008;362 C#5 2 10008;362 A#5 2 10008;364 G#5 4 10008;364 B4 4 10008;364 B3 4 8;364 G#4 4 8;368 B5 2 10008;370 B5 2 10008;372 B5 2 10008;374 B5 2 10008;376 B5 2 10008;368 G#5 4 10008;368 D#5 4 10008;372 D#5 4 10008;372 G#5 4 10008;376 G#5 2 10008;376 D#5 2 10008;378 C#5 2 10008;378 A#5 2 10008;380 G#5 4 10008;380 B4 4 10008;368 G#4 4 8;368 G#3 4 8;372 D#4 4 8;376 D#3 2 8;376 D#4 4 8;380 B3 4 8;380 G#4 4 8;372 B4 4 8;362 C#3 2 8;378 C#3 2 8;384 B5 4 10008;384 G5 4 10008;388 G5 4 10008;388 E5 4 10008;392 G5 4 10008;392 E5 4 10008;384 E3 4 8;388 E4 4 8;388 G4 4 8;392 B2 4 8;396 E4 4 8;396 G4 4 8;396 F#5 2 10008;398 E5 2 10008;400 C#5 2 10008;402 C#5 2 10008;404 B4 2 10008;406 B4 2 10008;408 A#4 2 10008;410 A#4 2 10008;412 G#4 2 10008;400 C#4 4 8;400 C#3 4 8;404 B3 4 8;404 B2 4 8;408 A#2 4 8;408 A#3 4 8;412 G#2 4 8;412 G#3 4 8;416 G#2 1 8;417 D#3 1 8;418 G#3 1 8;419 B3 1 8;420 D#4 1 10008;421 G#4 1 10008;422 B4 1 10008;423 D#5 1 10008;424 E5 4 10008;424 B4 4 10008;424 G#4 4 10008;424 E4 4 10008;424 E3 4 8;428 E2 4 8;428 E3 4 8;432 G#2 1 8;433 D#3 1 8;434 G#3 1 8;435 B3 1 8;436 D#4 1 10008;437 G#4 1 10008;438 B4 1 10008;439 D#5 1 10008;440 E5 4 10008;440 B4 4 10008;440 G#4 4 10008;440 E4 4 10008;440 E3 4 8;444 E2 4 8;444 E3 4 8;448 A4 4 10008;452 F5 4 10008;456 F5 4 10008;460 A4 4 10008;464 G#4 4 10008;468 A4 2 10008;470 B4 2 10008;472 C#5 8 10008;448 D3 4 8;452 D4 4 8;452 F4 4 8;456 A2 4 8;460 D4 4 8;460 F4 4 8;464 E4 4 8;464 E3 4 8;468 E4 4 8;472 F#2 4 8;472 A4 8 10008;468 E3 4 8;476 C#3 4 8;472 C#4 4 10008;476 A3 4 8;480 C#3 4 8;484 C#4 4 8;484 A4 4 8;484 F#6 4 10008;484 A6 4 10008;488 F6 4 10008;488 G#6 4 10008;488 F#3 4 8;492 C#4 4 8;492 A4 4 8;496 C#3 4 8;500 C#4 4 8;500 A4 4 8;500 D#6 4 10008;500 F#6 4 10008;504 D#6 4 10008;504 A5 4 10008;508 C#6 4 10008;508 A5 4 10008;512 D#6 4 10008;512 A5 4 10008;516 F#6 4 10008;516 A5 4 10008;520 G#6 4 10008;520 G#5 4 10008;504 F#3 4 8;508 C#4 4 8;508 A4 4 8;512 C#3 4 8;516 C#4 4 8;516 A4 4 8;520 G#3 4 8"

mySong = music(chrismas, pins=[Pin(42)])

while True:
    print(mySong.tick())
    sleep(0.04)
